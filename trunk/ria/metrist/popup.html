<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <link href="assets/css/reset-min.css" rel="stylesheet" type="text/css" /> 
        <link href="assets/css/metrist.css" rel="stylesheet" type="text/css" /> 
    </head>
    <body>
        <div id="page">
            <div id="content">
                <div>

                    <ul class="tweets" id="metrist:friends">
                        <li>
                            <h4 class="nick"><a href="#">明城</a></h4>
                            <p class="time">12h</p>
                            <p class="avatar"><img src="assets/images/avatar.png" /></p>
                            <p class="message">RT <a href="#">@feelinglucky</a>: 腾讯 TM 测试版的“锁定”功能非常棒</p>
                            <p class="act"><a href="#">Retweet</a><a href="#">Reply</a></p>
                        </li>
                    </ul>
                    <ul class="tweets" id="metrist:replies">
                        <li class="reply">
                            <h4 class="nick"><a href="#">明城</a></h4>
                            <p class="time">12h</p>
                            <p class="avatar"><img src="assets/images/avatar.png" /></p>
                            <p class="message">RT <a href="#">@feelinglucky</a>: 腾讯 TM 测试版的“锁定”功能非常棒</p>
                            <p class="act"><a href="#">Retweet</a><a href="#">Reply</a></p>
                        </li>
                    </ul>
                    <ul class="tweets" id="metrist:directs">
                        <li class="direct">
                            <h4 class="nick"><a href="#">明城</a></h4>
                            <p class="time">12h</p>
                            <p class="avatar"><img src="assets/images/avatar.png" /></p>
                            <p class="message">RT <a href="#">@feelinglucky</a>: 腾讯 TM 测试版的“锁定”功能非常棒</p>
                            <p class="act"><a href="#">Retweet</a><a href="#">Reply</a></p>
                        </li>
                    </ul>
                    <ul class="console" id="metrist:console">
                        <li class="error">this is error!</li>
                        <li class="warn">this is warn</li>
                        <li class="log">this is log</li>
                    </ul>
                </div>
            </div>
            <div id="form">
                <form action="#" method="post" id="metrist:form">
                    <div id="tweet">
                        <textarea></textarea>
                        <span>140</span>
                        <button type="submit" id="metrist:submit">&#187;</button>
                    </div>
                </form>
            </div>
            <ul id="channel">
                <li>Friends</li>
                <li>Replies</li>
                <li>Directs</li>
                <li>Console</li>
            </ul>
            <button id="refresh">Refresh</button>
        </div>
        <div id="loading hidden"></div>
        <script type="text/javascript" src="assets/yui-special/yahoo.js"></script>
        <script type="text/javascript" src="assets/yui-special/dom.js"></script>
        <script type="text/javascript" src="assets/yui-special/event.js"></script>
        <script type="text/javascript" src="assets/yui-special/animation.js"></script>
        <script type="text/javascript" src="assets/yui-special/connection_core.js"></script>
        <script type="text/javascript" src="assets/scripts/common.js"></script>
        <script type="text/javascript" src="assets/scripts/ui_popup.js"></script>
        <script type="text/javascript">
            (function() {
                // 初始化界面
                ReBuildUI();


                //var backgroundPage = chrome.extension.getBackgroundPage();
                //console.info(backgroundPage.Twitter.update);
                //console.info(backgroundPage.Twitter);

                //chrome.browserAction.setBadgeText({text:"!"});
                
                /*
                console.info(chrome.extension.getViews());

                var data_friends = JSON.parse(localStorage["friends"]);
                var data_replies = JSON.parse(localStorage["replies"]);
                var data_directs = JSON.parse(localStorage["direct"]);
                */

//                console.info(data_friends);
//                console.info(data_replies);
//                console.info(data_directs);

//var json = JSON.stringify(inst);
                /*
console.info(JSON.stringify(JSON.parse(localStorage["friends"])));

                function filltweets(container, data) {
                    for(var i = 0, len = data.length; i < len; i++) {
                        var item = data[i];
                        var li = document.createElement('li');
                        var sender = item.user || item.sender;
                        var html = [
                            '<h4 class="nick"><a href="http://twitter.com/'+
                                sender.screen_name +'">'+ sender.name +'</a></h4>',
                            '<p class="time">'+ relative_time(item.created_at) +'</p>',
                            '<p class="avatar">' + 
                                '<img width="48" height="48" src="'+ 
                                sender.profile_image_url +'" alt="'+ sender.screen_name+'"/></p>',
                            '<p class="message">'+ item.text +'</p>',
                            '<p class="act" param:id="'+ item.id +'"><a href="#">Retweet</a><a href="#">Reply</a></p>'
                        ];
                        li.innerHTML = html.join('');
                        container.appendChild(li);
                    }
                }

                filltweets(friends, data_friends);
                filltweets(replies, data_replies);
                filltweets(directs, data_directs);
                */
             })();
        </script>
    </body>
</html>
